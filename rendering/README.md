# Модуль рендеринга 3D моделей

Этот модуль реализует полный цикл рендеринга 3D моделей для вашего проекта.

## Что было реализовано

### 1. Триангуляция и нормали (`triangulation.py`)
- **Триангуляция** - разбивает многоугольники на треугольники (графические карты умеют рисовать только треугольники)
- **Вычисление нормалей** - вычисляет векторы, перпендикулярные поверхностям (нужны для освещения)
- **Сглаживание нормалей** - усредняет нормали соседних граней для плавного освещения

### 2. Камера (`camera.py`)
- Управление позицией и направлением взгляда
- Матрицы вида и проекции для преобразования 3D координат в экранные
- Управление с клавиатуры (WASD/стрелки) и мыши

### 3. Растеризация (`rasterizer.py`)
- **Растеризация треугольников** - рисует треугольники пиксель за пикселем
- **Z-буфер** - решает проблему глубины (задние объекты не рисуются поверх передних)
- **Интерполяция** - плавно смешивает цвета и текстуры между вершинами

### 4. Текстуры (`texture.py`)
- Загрузка изображений (PNG, JPG и т.д.)
- Наложение текстур на модели по UV координатам
- Билинейная фильтрация для сглаживания

### 5. Освещение (`lighting.py`)
- Модель освещения Фонга:
  - **Ambient** - базовый свет везде
  - **Diffuse** - зависит от угла между нормалью и светом
  - **Specular** - блики на блестящих поверхностях

### 6. Главный рендерер (`renderer.py`)
- Объединяет все компоненты
- Управляет настройками рендеринга
- Выполняет полный цикл: 3D → экран → пиксели

### 7. Виджет рендеринга (`render_widget.py`)
- PyQt5 виджет для отображения 3D сцены
- Обработка клавиатуры и мыши для управления камерой
- Обновление изображения

## Как это работает (простыми словами)

1. **Загрузка модели** → вершины, грани, нормали
2. **Триангуляция** → все грани разбиваются на треугольники
3. **Трансформации** → модель перемещается, вращается, масштабируется
4. **Проекция камеры** → 3D координаты преобразуются в 2D экранные
5. **Растеризация** → треугольники рисуются пиксель за пикселем
6. **Z-буфер** → проверяется глубина каждого пикселя
7. **Текстура** → накладывается изображение (если включено)
8. **Освещение** → вычисляется цвет с учетом света (если включено)
9. **Отображение** → результат показывается на экране

## Использование

Все интегрировано в главное окно приложения. В интерфейсе есть:

- **Режимы отрисовки**:
  - ☑ Рисовать полигональную сетку
  - ☑ Использовать текстуру
  - ☑ Использовать освещение

- **Управление камерами**:
  - Добавление/удаление камер
  - Переключение между камерами
  - Управление с клавиатуры (WASD/стрелки) и мыши

- **Загрузка текстур**:
  - Кнопка "Загрузить текстуру..."
  - Поддерживаются PNG, JPG, BMP и другие форматы

## Управление камерой

- **W/↑** - вперед
- **S/↓** - назад
- **A/←** - влево
- **D/→** - вправо
- **Q** - приблизить
- **E** - отдалить
- **Мышь (зажатая левая кнопка)** - вращение камеры вокруг цели

## Технические детали

- Используется программная растеризация (не OpenGL)
- Z-буфер для правильного отображения глубины
- Билинейная фильтрация текстур
- Модель освещения Фонга
- Поддержка нескольких камер в сцене
